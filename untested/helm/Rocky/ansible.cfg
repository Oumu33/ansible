[defaults]
# ============================================
# Ansible配置文件
# ============================================
# 说明：Helm部署Ansible配置
# 作者：VictoriaMetrics-Full
# 更新时间：2026-01-18
# ============================================

# 主机清单路径
inventory = inventory/hosts.yml

# 角色路径
roles_path = roles

# 回调插件
callback_whitelist = timer, profile_tasks, yaml

# SSH配置
host_key_checking = False
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null

# 并行配置
forks = 10

# 超时配置
timeout = 30

# 显示配置
display_skipped_hosts = False
display_ok_hosts = True

# 错误处理
any_errors_fatal = False

# 日志配置
log_path = ./ansible.log

# 其他配置
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
fact_caching_timeout = 86400

# Privilege Escalation
[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r