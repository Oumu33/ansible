---
# Redis 集群版全局变量

# 版本
redis_version: "7.2"

# 安装目录
redis_install_dir: "/opt/redis"
redis_config_dir: "/etc/redis"
redis_data_dir: "/var/lib/redis"
redis_log_dir: "/var/log/redis"

# 系统用户
redis_user: "redis"
redis_group: "redis"

# Redis 配置
redis_port: 6379
redis_bind: "0.0.0.0"
redis_protected_mode: "no"
redis_tcp_backlog: 511
redis_timeout: 0
redis_tcp_keepalive: 300

# Redis 集群配置
redis_cluster_enabled: "yes"
redis_cluster_config_file: "/etc/redis/nodes.conf"
redis_cluster_node_timeout: 5000
redis_cluster_replica_validity_factor: 10
redis_cluster_migration_barrier: 1
redis_cluster_require_full_coverage: "yes"

# Redis 集群节点配置
redis_cluster_nodes:
  - host: "172.22.2.20"
    port: 6379
  - host: "172.22.2.21"
    port: 6379
  - host: "172.22.2.22"
    port: 6379
  - host: "172.22.2.23"
    port: 6379
  - host: "172.22.2.24"
    port: 6379
  - host: "172.22.2.25"
    port: 6379

# Redis 集群分片配置
redis_cluster_slots: 16384
redis_cluster_replicas: 1

# Redis 内存配置
redis_maxmemory: "256mb"
redis_maxmemory_policy: "allkeys-lru"

# Redis 持久化配置
redis_save: ""
redis_stop_writes_on_bgsave_error: "yes"
redis_rdbcompression: "yes"
redis_rdbchecksum: "yes"
redis_dbfilename: "dump.rdb"
redis_dir: "/var/lib/redis"

# Redis AOF 配置
redis_appendonly: "yes"
redis_appendfilename: "appendonly.aof"
redis_appendfsync: "everysec"
redis_no_appendfsync_on_rewrite: "no"
redis_auto_aof_rewrite_percentage: 100
redis_auto_aof_rewrite_min_size: "64mb"

# Redis 慢查询配置
redis_slowlog_log_slower_than: 10000
redis_slowlog_max_len: 128

# Redis 密码
redis_requirepass: "redis_password"

# 下载超时 (秒)
download_timeout: 1800

# 服务状态
service_state: "started"
service_enabled: true